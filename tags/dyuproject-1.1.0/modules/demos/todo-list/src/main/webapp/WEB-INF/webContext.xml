<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">


<beans>

  <bean id="entityManagerManager" class="com.dyuproject.ext.jpa.EntityManagerManager">
    <property name="persistenceUnitName" value="todo-list-persistence"/>
  </bean>
  
  <bean id="loginInterceptor" class="com.dyuproject.demos.todolist.service.LoginInterceptor">
    <property name="interceptor" ref="entityManagerManager"/>
  </bean>
  
  <bean id="todoDao" class="com.dyuproject.demos.todolist.dao.TodoDao">
    <property name="entityManagerManager" ref="entityManagerManager"/>
  </bean>  
  
  <bean id="userDao" class="com.dyuproject.demos.todolist.dao.UserDao">
    <property name="entityManagerManager" ref="entityManagerManager"/>
  </bean>
  
  <bean id="webContext" class="com.dyuproject.web.rest.service.RESTServiceContext">
    <property name="attributes">
      <map>
        <entry key="todoDao" value-ref="todoDao"/>
        <entry key="userDao" value-ref="userDao"/>      
      </map>
    </property>
    
    <property name="interceptors">
      <map>
        <entry key="/overview" value-ref="loginInterceptor"/>
        <entry key="/auth" value-ref="entityManagerManager"/>
        <entry key="/users" value-ref="entityManagerManager"/>
        <entry key="/todos" value-ref="entityManagerManager"/>
      </map>
    </property>    

    <property name="services">    
      <list>        
        <bean class="com.dyuproject.demos.todolist.service.MainService"/>
        <bean class="com.dyuproject.demos.todolist.service.TodoService"/>
        <bean class="com.dyuproject.demos.todolist.service.UserService"/>
      </list>
    </property>  
  </bean>

</beans>
